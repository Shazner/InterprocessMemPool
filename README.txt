TODO:
put things in their own namespace
change some prints to cerr